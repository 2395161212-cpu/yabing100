<!--pages/home/home.wxml-->
<!-- Ëá™ÂÆö‰πâÂØºËà™Ê†è -->
<view class="custom-navbar">
  <view class="navbar-content" style="padding-top: {{statusBarHeight}}px;">
    <image src="/images/logo.png" mode="aspectFit" class="navbar-logo"></image>
  </view>
</view>

<scroll-view class="container" scroll-y bindscrolltolower="loadMore" style="padding-top: {{navBarHeight}}px;">
  <!-- Banner ËΩÆÊí≠ -->

  <view class="banner">
    <image src="{{banners[0].image}}" mode="aspectFill" class="banner-image"></image>
  </view>

  <!-- ÈáëÂàö‰Ωç -->
  <view class="icon-nav">
    <view class="nav-item" wx:for="{{navItems}}" wx:key="id" bindtap="onNavTap" data-id="{{item.id}}">
      <view class="nav-icon">
        <image src="{{item.icon}}" mode="aspectFit" class="nav-icon-img"></image>
      </view>
      <text class="nav-text {{activeNav === item.id ? 'active' : ''}}">{{item.name}}</text>
    </view>
  </view>

  <!-- ËßÜÈ¢ëÂàóË°® -->
  <view class="video-section">
    <!-- ÁßëÊôÆËßÜÈ¢ëÂÜÖÂÆπ -->
    <block wx:if="{{activeNav === 0}}">
      <!-- ÂàÜÁ±ªÊ†áÁ≠æ -->
      <scroll-view class="category-tabs" scroll-x enable-flex>
        <view class="category-item {{activeCategory === item.id ? 'active' : ''}}" 
              wx:for="{{categories}}" 
              wx:key="id" 
              bindtap="onCategoryTap" 
              data-id="{{item.id}}">
          {{item.name}}
        </view>
      </scroll-view>
      
      <view class="video-list">
        <view class="video-item" wx:for="{{videos}}" wx:key="id" bindtap="onVideoTap" data-id="{{item.id}}">
          <image src="{{item.cover}}" mode="aspectFill" class="video-cover"></image>
          <view class="video-info">
            <text class="video-title">{{item.title}}</text>
            <view class="video-meta">
              <view class="video-author">
                <image src="{{item.avatar}}" mode="aspectFill" class="author-avatar"></image>
                <text class="author-name">{{item.author}}</text>
              </view>
              <view class="video-likes">
                <image src="/images/like.png" mode="aspectFit" class="like-icon"></image>
                <text class="likes-count">{{item.likes}}</text>
              </view>
            </view>
          </view>
        </view>
      </view>
      
      <!-- Âä†ËΩΩÁä∂ÊÄÅ -->
      <view class="loading-status" wx:if="{{loading}}">
        <text>Âä†ËΩΩ‰∏≠...</text>
      </view>
      <view class="loading-status" wx:if="{{!hasMore && videos.length > 0}}">
        <text>Ê≤°ÊúâÊõ¥Â§ö‰∫Ü</text>
      </view>
    </block>

    <!-- ÁßëÊôÆÂêçÂåªÂÜÖÂÆπ -->
    <block wx:elif="{{activeNav === 1}}">
      <!-- ÂàÜÁ±ªÊ†áÁ≠æ -->
      <scroll-view class="category-tabs" scroll-x enable-flex>
        <view class="category-item {{activeDoctorCategory === item.id ? 'active' : ''}}" 
              wx:for="{{doctorCategories}}" 
              wx:key="id" 
              bindtap="onDoctorCategoryTap" 
              data-id="{{item.id}}">
          {{item.name}}
        </view>
      </scroll-view>

      <!-- ÂåªÁîüÂàóË°® -->
      <view class="doctor-list">
        <view class="doctor-card-item" wx:for="{{doctors}}" wx:key="id" bindtap="onDoctorTap" data-id="{{item.id}}">
          <image class="doctor-avatar" src="{{item.avatar}}" mode="cover"></image>
          <view class="doctor-content">
            <view class="doctor-title-row">
              <text class="doctor-name">{{item.name}}</text>
              <image class="doctor-badge" src="/images/doctor-certification.png" mode="aspectFit"></image>
              <text class="doctor-title-text">{{item.title}} | {{item.department}}</text>
            </view>
            <view class="doctor-tags">
              <text class="doctor-tag">{{item.hospital}}</text>
              <text class="doctor-tag">{{item.tag}}</text>
            </view>
            <text class="doctor-intro">{{item.introduction}}</text>
          </view>
        </view>
      </view>
      
      <!-- Âä†ËΩΩÁä∂ÊÄÅ -->
      <view class="loading-status" wx:if="{{doctorLoading}}">
        <text>Âä†ËΩΩ‰∏≠...</text>
      </view>
      <view class="loading-status" wx:if="{{!doctorHasMore && doctors.length > 0}}">
        <text>Ê≤°ÊúâÊõ¥Â§ö‰∫Ü</text>
      </view>
    </block>

    <!-- ÁßëÊôÆ‰πãÊòüÂÜÖÂÆπ -->
    <block wx:elif="{{activeNav === 2}}">
      <!-- ÂàÜÁ±ªÊ†áÁ≠æ -->
      <scroll-view class="category-tabs" scroll-x enable-flex>
        <view class="category-item {{activeStarCategory === item.id ? 'active' : ''}}" 
              wx:for="{{starCategories}}" 
              wx:key="id" 
              bindtap="onStarCategoryTap" 
              data-id="{{item.id}}">
          {{item.name}}
        </view>
      </scroll-view>

      <!-- ÁßëÊôÆ‰πãÊòüÂàóË°® -->
      <view class="doctor-list">
        <view class="doctor-card-item" wx:for="{{stars}}" wx:key="id" bindtap="onStarTap" data-id="{{item.id}}">
          <image class="doctor-avatar" src="{{item.avatar}}" mode="cover"></image>
          <view class="doctor-content">
            <view class="doctor-title-row">
              <text class="doctor-name">{{item.name}}</text>
              <image class="doctor-badge" src="/images/doctor-certification.png" mode="aspectFit"></image>
              <text class="doctor-title-text">{{item.title}} | {{item.department}}</text>
            </view>
            <view class="doctor-tags">
              <text class="doctor-tag">{{item.hospital}}</text>
              <text class="doctor-tag">{{item.tag}}</text>
            </view>
            <text class="doctor-intro">{{item.introduction}}</text>
          </view>
        </view>
      </view>
      
      <!-- Âä†ËΩΩÁä∂ÊÄÅ -->
      <view class="loading-status" wx:if="{{starLoading}}">
        <text>Âä†ËΩΩ‰∏≠...</text>
      </view>
      <view class="loading-status" wx:if="{{!starHasMore && stars.length > 0}}">
        <text>Ê≤°ÊúâÊõ¥Â§ö‰∫Ü</text>
      </view>
    </block>

    <!-- ÂÖ∂‰ªñÈáëÂàö‰ΩçÂÜÖÂÆπÔºàCHTVÔºâ -->
    <block wx:else>
      <view class="empty-content">
        <text class="empty-icon">üì∫</text>
        <text class="empty-text">CHTVÂÜÖÂÆπÂºÄÂèë‰∏≠</text>
      </view>
    </block>
  </view>
</scroll-view>

